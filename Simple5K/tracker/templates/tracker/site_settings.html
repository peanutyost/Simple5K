{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container py-3 py-md-4">
    <div class="row justify-content-center">
        <div class="col-12 col-md-10 col-lg-8">
            <h1 class="mb-4">Settings</h1>

            {% if messages %}
            <div class="mb-3">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }}" role="alert">{{ message }}</div>
                {% endfor %}
            </div>
            {% endif %}

            <div class="card mb-4">
                <div class="card-header">PayPal (signup payment)</div>
                <div class="card-body">
                    <p class="text-muted small mb-4">
                        When enabled, new signups are sent to PayPal with the race entry fee. After they pay, they are marked as paid. If disabled, signup goes to the success page and runners can pay on race day.
                    </p>
                    <form method="post" action="{% url 'tracker:site-settings' %}">
                        {% csrf_token %}
                        <div class="mb-4">
                            <div class="form-check form-switch">
                                {{ form.paypal_enabled }}
                                <label class="form-check-label" for="{{ form.paypal_enabled.id_for_label }}">{{ form.paypal_enabled.label }}</label>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.paypal_business_email.id_for_label }}" class="form-label">{{ form.paypal_business_email.label }}</label>
                            {{ form.paypal_business_email }}
                            {% if form.paypal_business_email.help_text %}<small class="form-text text-muted">{{ form.paypal_business_email.help_text }}</small>{% endif %}
                            {% if form.paypal_business_email.errors %}<div class="invalid-feedback d-block">{{ form.paypal_business_email.errors }}</div>{% endif %}
                        </div>
                        <div class="mb-4">
                            <div class="form-check form-switch">
                                {{ form.paypal_sandbox }}
                                <label class="form-check-label" for="{{ form.paypal_sandbox.id_for_label }}">{{ form.paypal_sandbox.label }}</label>
                            </div>
                            {% if form.paypal_sandbox.help_text %}<small class="form-text text-muted">{{ form.paypal_sandbox.help_text }}</small>{% endif %}
                        </div>
                        <button type="submit" class="btn btn-primary">Save settings</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
